<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script>
        if (!localStorage.getItem('authToken')) {
            window.location.href = 'index.html';
        }
    </script>
        <title>Dashboard - American Bank United</title>
        <script src="https://cdn.tailwindcss.com"></script>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
        <link rel="stylesheet" href="css/opay.css">
        <style>
            body { background: #f8fafc }
        </style>
        <link rel="icon" href="assets/favicon.svg" type="image/svg+xml">
</head>
<body class="opay-ui">
        <!-- Navigation -->
        <header class="opay-header">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="flex justify-between items-center">
                                        <div class="flex items-center gap-4">
                                                <a href="/" class="opay-brand flex items-center gap-3">
                                                    <img src="assets/abu-logo.svg" alt="ABU logo" class="w-10 h-10">
                                                    <div>
                                                        <div class="opay-name">American Bank United</div>
                                                        <div class="opay-sub">ABU — Everyday banking</div>
                                                    </div>
                                                </a>
                                                <div class="ml-8 flex items-center gap-3">
                                                    <button aria-label="Contact support" title="Contact support" onclick="openCustomerServiceModal()" class="p-2 rounded-full hover:bg-slate-100">
                                                        <i class="fas fa-headphones text-slate-700"></i>
                                                    </button>
                                                    <button aria-label="Notifications" title="Notifications" onclick="location.href='notifications.html'" class="p-2 rounded-full hover:bg-slate-100 relative">
                                                        <i class="fas fa-bell text-slate-700"></i>
                                                        <span class="absolute -top-1 -right-1 bg-rose-500 text-white text-xs rounded-full w-4 h-4 flex items-center justify-center">3</span>
                                                    </button>
                                                    <button aria-label="Open menu" title="Menu" onclick="toggleSidebar()" class="p-2 rounded-md hover:bg-slate-100">
                                                        <i class="fas fa-bars text-slate-700"></i>
                                                    </button>
                                                </div>
                                        </div>
                </div>
            </div>
        </header>

        <main class="max-w-md mx-auto p-4 pb-32">
            <!-- Mobile app top area -->
            <div class="flex items-center justify-between mb-4">
                <div>
                    <h2 class="text-lg font-semibold">Good day, <span id="userGreeting">User</span></h2>
                    <p class="text-xs text-slate-500">Smart banking at your fingertips</p>
                </div>
                <div class="flex items-center gap-3">
                    <!-- Small profile avatar placed next to greeting for quick access -->
                    <button id="topProfileBtn" onclick="location.href='profile.html'" aria-label="Open profile" title="Profile" class="w-10 h-10 rounded-full bg-white flex items-center justify-center shadow">
                        <i class="fas fa-user text-slate-700"></i>
                    </button>
                </div>
            </div>

            <!-- Deposit Modal -->
            <div id="modal-deposit" class="fixed inset-0 z-50 hidden items-center justify-center bg-black bg-opacity-50">
                <div class="bg-white rounded-lg w-11/12 max-w-md p-4">
                    <h3 class="text-lg font-semibold mb-2">Deposit Funds <span class="text-xs text-slate-400">(v20260121.2)</span></h3>

                    <!-- Method chooser -->
                    <div class="grid grid-cols-2 gap-3 mb-3">
                        <button id="depositChoice-bank" type="button" onclick="showDepositMethod('bank')" class="deposit-choice p-3 bg-slate-50 rounded-md text-left flex items-start gap-3">
                            <div class="w-10 h-10 bg-white rounded-full flex items-center justify-center shadow"><i class="fas fa-university text-indigo-600"></i></div>
                            <div>
                                <div class="font-medium">Bank</div>
                                <div class="text-xs text-slate-500">Use a linked bank account (internal)</div>
                                <div class="choice-mini-details hidden mt-2 text-xs text-slate-600">
                                    <div class="mini-line">Acct: <span class="mini-acct">—</span></div>
                                    <div class="mini-line">IBAN: <span class="mini-iban">—</span></div>
                                </div>
                            </div>
                        </button>

                        <button id="depositChoice-account" type="button" onclick="showDepositMethod('account')" class="deposit-choice p-3 bg-slate-50 rounded-md text-left flex items-start gap-3">
                            <div class="w-10 h-10 bg-white rounded-full flex items-center justify-center shadow"><i class="fas fa-building text-emerald-600"></i></div>
                            <div>
                                <div class="font-medium">Account</div>
                                <div class="text-xs text-slate-500">Send to an external bank account</div>
                                <div class="choice-mini-details hidden mt-2 text-xs text-slate-600">
                                    <div class="mini-line">Bank: <span class="mini-bank">—</span></div>
                                    <div class="mini-line">Acct: <span class="mini-acct">—</span></div>
                                </div>
                            </div>
                        </button>

                        <button id="depositChoice-card" type="button" onclick="showDepositMethod('card')" class="deposit-choice p-3 bg-slate-50 rounded-md text-left flex items-start gap-3">
                            <div class="w-10 h-10 bg-white rounded-full flex items-center justify-center shadow"><i class="fas fa-credit-card text-indigo-500"></i></div>
                            <div>
                                <div class="font-medium">Card</div>
                                <div class="text-xs text-slate-500">Use a saved card to top up</div>
                                <div class="choice-mini-details hidden mt-2 text-xs text-slate-600">
                                    <div class="mini-line">Selected: <span class="mini-card">—</span></div>
                                </div>
                            </div>
                        </button>

                        <button id="depositChoice-crypto" type="button" onclick="showDepositMethod('crypto')" class="deposit-choice p-3 bg-slate-50 rounded-md text-left flex items-start gap-3">
                            <div class="w-10 h-10 bg-white rounded-full flex items-center justify-center shadow"><i class="fas fa-coins text-fuchsia-600"></i></div>
                            <div>
                                <div class="font-medium">Crypto</div>
                                <div class="text-xs text-slate-500">Send from your crypto wallet</div>
                                <div class="choice-mini-details hidden mt-2 text-xs text-slate-600">
                                    <div class="mini-line">Wallet: <span class="mini-wallet">—</span></div>
                                </div>
                            </div>
                        </button>
                    </div>

                    <!-- Common: select destination account -->
                    <label class="block text-sm">Deposit To</label>
                    <select id="depositAccount" class="w-full border rounded p-2 mb-3"></select>

                    <!-- Bank / account method (display-only details + amount) -->
                    <form id="deposit-form-bank" class="deposit-method" onsubmit="submitDeposit(event)">
                        <div class="mb-2 grid grid-cols-2 gap-2">
                            <div>
                                <div class="text-xs text-slate-500">Account number</div>
                                <div id="bankAccountNumberLabel" class="font-medium">—</div>
                            </div>
                            <div>
                                <div class="text-xs text-slate-500">IBAN</div>
                                <div id="bankIbanLabel" class="font-medium">—</div>
                            </div>
                            <div>
                                <div class="text-xs text-slate-500">Account type</div>
                                <div id="bankAccountTypeLabel" class="font-medium">—</div>
                            </div>
                            <div>
                                <div class="text-xs text-slate-500">Email</div>
                                <div id="bankEmailLabel" class="font-medium">—</div>
                            </div>
                            <div>
                                <div class="text-xs text-slate-500">Phone</div>
                                <div id="bankPhoneLabel" class="font-medium">—</div>
                            </div>
                        </div>
                        <div class="mb-2">
                            <label class="text-sm">Amount</label>
                            <input id="depositAmount" type="number" step="0.01" class="w-full border rounded p-2" placeholder="0.00" />
                        </div>
                        <div class="flex justify-end gap-2">
                            <button type="button" onclick="closeFeatureModal('deposit')" class="px-4 py-2">Cancel</button>
                            <button type="submit" class="px-4 py-2 bg-blue-600 text-white rounded">Deposit</button>
                        </div>
                    </form>

                    <!-- External Account deposit (separate from internal 'bank' accounts) -->
                    <form id="deposit-form-account" class="deposit-method hidden" onsubmit="submitDeposit(event)">
                        <div class="mb-2">
                            <label class="block text-sm">Bank name</label>
                            <input id="externalBankName" type="text" class="w-full border rounded p-2" placeholder="Receiving bank name" />
                        </div>
                        <div class="mb-2 grid grid-cols-2 gap-2">
                            <div>
                                <label class="text-xs text-slate-500">Account number</label>
                                <input id="externalAccountNumber" type="text" class="w-full border rounded p-2" placeholder="Account number" />
                            </div>
                            <div>
                                <label class="text-xs text-slate-500">IBAN (optional)</label>
                                <input id="externalIban" type="text" class="w-full border rounded p-2" placeholder="IBAN" />
                            </div>
                        </div>
                        <div class="mb-2">
                            <label class="text-sm">Amount</label>
                            <input id="externalAmount" type="number" step="0.01" class="w-full border rounded p-2" placeholder="0.00" />
                        </div>
                        <div class="flex justify-end gap-2">
                            <button type="button" onclick="closeFeatureModal('deposit')" class="px-4 py-2">Cancel</button>
                            <button type="submit" class="px-4 py-2 bg-blue-600 text-white rounded">Send to External Account</button>
                        </div>
                    </form>

                    <!-- Card method -->
                    <div id="cardDetails" class="deposit-method hidden">
                        <div class="space-y-2 mb-2" id="cardsList">
                            <!-- cards populated here (display-only). Click to select -->
                        </div>
                        <div class="mb-2">
                            <label class="text-sm">Amount</label>
                            <input id="cardAmount" type="number" step="0.01" class="w-full border rounded p-2" placeholder="0.00" />
                        </div>
                        <div class="flex justify-end gap-2">
                            <button type="button" onclick="closeFeatureModal('deposit')" class="px-4 py-2">Cancel</button>
                            <button type="button" onclick="submitDeposit(event)" class="px-4 py-2 bg-blue-600 text-white rounded">Use Selected Card</button>
                        </div>
                    </div>

                    <!-- Crypto method -->
                    <div id="cryptoDetails" class="deposit-method hidden">
                        <div class="space-y-2 mb-2" id="walletsList">
                            <!-- wallet addresses populated here -->
                        </div>
                        <div class="mb-2">
                            <label class="text-sm">Amount</label>
                            <input id="cryptoAmount" type="number" step="0.00000001" class="w-full border rounded p-2" placeholder="0.00000000" />
                        </div>
                        <div class="flex justify-end gap-2">
                            <button type="button" onclick="closeFeatureModal('deposit')" class="px-4 py-2">Cancel</button>
                            <button type="button" onclick="submitDeposit(event)" class="px-4 py-2 bg-blue-600 text-white rounded">Confirm Deposit</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Withdraw Modal -->
            <div id="modal-withdraw" class="fixed inset-0 z-50 hidden items-center justify-center bg-black bg-opacity-50">
                <div class="bg-white rounded-lg w-11/12 max-w-md p-4">
                    <h3 class="text-lg font-semibold mb-2">Withdraw Funds</h3>
                    <form onsubmit="submitWithdraw(event)">
                        <label class="block text-sm">Account</label>
                        <select id="withdrawAccount" class="w-full border rounded p-2 mb-2"></select>
                        <label class="block text-sm">Amount</label>
                        <input id="withdrawAmount" type="number" step="0.01" class="w-full border rounded p-2 mb-2" placeholder="0.00" />
                        <div class="flex justify-end gap-2">
                            <button type="button" onclick="closeFeatureModal('withdraw')" class="px-4 py-2">Cancel</button>
                            <button type="submit" class="px-4 py-2 bg-red-600 text-white rounded">Withdraw</button>
                        </div>
                    </form>
                </div>
            </div>

            <!-- Balance carousel: total + per-account slides -->
            <div class="balance-carousel mb-4 relative">
                <div class="carousel-track overflow-hidden rounded-2xl shadow-lg relative">
                    <div id="balanceSlides" class="flex transition-transform duration-300"></div>
                    <button onclick="balancePrev()" aria-label="Previous" class="absolute left-2 top-1/2 -translate-y-1/2 bg-white/30 p-2 rounded-full">‹</button>
                    <button onclick="balanceNext()" aria-label="Next" class="absolute right-2 top-1/2 -translate-y-1/2 bg-white/30 p-2 rounded-full">›</button>
                </div>
                <div id="balanceIndicators" class="mt-3 flex justify-center gap-2"></div>
            </div>

            <!-- Quick actions (configurable, mirrors profile selection if present) -->
            <div class="mb-4">
                <div id="homeQuickActionsGrid" class="grid grid-cols-4 gap-3"></div>
            </div>

            <script>
                (function(){
                    const QUICK_ACTIONS_REGISTRY = [
                        { id: 'accounts', label: 'Accounts', icon: 'fas fa-wallet', color: 'text-indigo-600', href: 'accounts.html' },
                        { id: 'trade', label: 'Trade', icon: 'fas fa-chart-line', color: 'text-emerald-600', href: 'trade.html' },
                        { id: 'intl', label: 'Intl Transfer', icon: 'fas fa-globe', color: 'text-sky-500', href: 'transfer.html?type=international' },
                        { id: 'history', label: 'History', icon: 'fas fa-history', color: 'text-slate-700', href: 'transactions.html' },
                        { id: 'deposit', label: 'Deposit', icon: 'fas fa-money-bill-wave', color: 'text-green-600', href: 'deposit.html' },
                        { id: 'withdraw', label: 'Withdraw', icon: 'fas fa-hand-holding-dollar', color: 'text-rose-600', href: '#' },
                        { id: 'billpay', label: 'Pay Bills', icon: 'fas fa-file-invoice-dollar', color: 'text-yellow-600', href: "javascript:openFeatureModal('bill')" },
                        { id: 'cards', label: 'Cards', icon: 'fas fa-credit-card', color: 'text-indigo-500', href: 'cards.html' },
                        { id: 'qr', label: 'QR Pay', icon: 'fas fa-qrcode', color: 'text-slate-700', href: 'qr.html' },
                        { id: 'send', label: 'Send Money', icon: 'fas fa-paper-plane', color: 'text-indigo-600', href: 'transfer.html' },
                        { id: 'beneficiaries', label: 'Beneficiaries', icon: 'fas fa-users', color: 'text-indigo-600', href: 'javascript:openBeneficiariesModal()' },
                        { id: 'otherbanks', label: 'Other Banks', icon: 'fas fa-university', color: 'text-emerald-600', href: 'other-banks.html' },
                        { id: 'wallet', label: 'Wallet', icon: 'fas fa-wallet', color: 'text-fuchsia-600', href: 'wallet.html' },
                    ];

                    const QUICK_CONFIG_KEY = 'abu_quick_actions';
                    function loadQuickConfig(){ try{ const raw = localStorage.getItem(QUICK_CONFIG_KEY); if(!raw) return null; return JSON.parse(raw); }catch(e){return null;} }

                    function findById(id){ return QUICK_ACTIONS_REGISTRY.find(a=>a.id===id); }

                    function render(){
                        const grid = document.getElementById('homeQuickActionsGrid'); if(!grid) return;
                        grid.innerHTML='';
                        const config = loadQuickConfig();
                        const list = config && Array.isArray(config) ? config : QUICK_ACTIONS_REGISTRY.map(a=>a.id);
                        list.forEach(id=>{
                            const act = findById(id);
                            if(!act) return;
                            const el = document.createElement(act.href && act.href.startsWith('javascript:')? 'button':'a');
                            if(act.href && !act.href.startsWith('javascript:')) el.href = act.href;
                            el.className = 'flex flex-col items-center p-2';
                            el.innerHTML = `<div class="w-14 h-14 bg-white rounded-full flex items-center justify-center shadow"><i class="${act.icon} ${act.color}"></i></div><span class="text-xs">${act.label}</span>`;
                            if(act.href && act.href.startsWith('javascript:')){
                                el.addEventListener('click', ()=>{ try{ eval(act.href); }catch(e){ console.warn(e);} });
                            }
                            grid.appendChild(el);
                        });
                        // append More... button if not present
                        const more = document.createElement('button'); more.id='moreToggle'; more.className='flex flex-col items-center p-2'; more.innerHTML = `<div class="w-14 h-14 bg-white rounded-full flex items-center justify-center shadow"><i class="fas fa-ellipsis-h text-slate-700"></i></div><span class="text-xs">More...</span>`;
                        more.addEventListener('click', ()=> toggleMoreMenu());
                        grid.appendChild(more);
                    }

                    document.addEventListener('DOMContentLoaded', render);
                })();
            </script>

            <!-- SmartSave promo carousel (4 slides) -->
            <div class="mb-4">
                <div id="promoCarousel" class="promo-carousel">
                    <div class="promo-slides">
                        <div class="promo-slide opay-smoke-gold">
                            <h3 class="font-semibold">Save more with SmartSave</h3>
                            <p class="text-xs mt-2">Auto-save daily, weekly or monthly — earn interest</p>
                        </div>
                        <div class="promo-slide opay-card">
                            <h3 class="font-semibold">Special Offer: 0% Fee on Transfers</h3>
                            <p class="text-xs mt-2">Make transfers with no fees this month. Limited time offer.</p>
                        </div>
                        <div class="promo-slide opay-card">
                            <h3 class="font-semibold">Ad: Get Premium Checking</h3>
                            <p class="text-xs mt-2">Upgrade to Premium and earn cashback on purchases.</p>
                            <a href="cards.html" class="text-sm text-indigo-600 mt-2 inline-block">Learn more</a>
                        </div>
                        <div class="promo-slide opay-card">
                            <h3 class="font-semibold">What's Trendy?</h3>
                            <p class="text-xs mt-2">Explore top financial tips and trending products curated for you.</p>
                            <a href="investments.html" class="text-sm text-indigo-600 mt-2 inline-block">Visit trends</a>
                        </div>
                    </div>
                    <div class="promo-indicators mt-3"></div>
                </div>
            </div>
        </main>

        <script src="js/utils.js?v=20260121.2"></script>
        <script src="js/api.js?v=20260121.2"></script>
        <script src="js/auth.js?v=20260121.2"></script>
        <script src="js/dashboard-api.js?v=20260121.2"></script>
        <script src="js/features.js?v=20260121.2"></script>
        <script src="js/ui.js?v=20260121.2"></script>
        <script src="js/balance-slides.js?v=20260121.2"></script>
            <script>
                    // expose small helper for beneficiaries open from quick actions
                    async function openBeneficiariesModal() { if (window.openFeatureModal) { openFeatureModal('beneficiaries'); await loadBeneficiaries(); } }

                    // Toggle the More... menu that contains additional quick actions
                    function toggleMoreMenu() {
                        const menu = document.getElementById('moreMenu');
                        const btn = document.getElementById('moreToggle');
                        if (!menu) return;
                        const hidden = menu.classList.contains('hidden');
                        if (hidden) {
                            menu.classList.remove('hidden');
                            btn.setAttribute('aria-expanded', 'true');
                            // scroll into view on small screens
                            menu.scrollIntoView({ behavior: 'smooth', block: 'center' });
                        } else {
                            menu.classList.add('hidden');
                            btn.setAttribute('aria-expanded', 'false');
                        }
                    }
                </script>

                    <script>
                        // Simple promo carousel logic
                        (function(){
                            const carousel = document.getElementById('promoCarousel');
                            if (!carousel) return;
                            const slidesWrap = carousel.querySelector('.promo-slides');
                            const slides = Array.from(carousel.querySelectorAll('.promo-slide'));
                            const indicators = carousel.querySelector('.promo-indicators');
                            let idx = 0;

                            function renderIndicators(){
                                indicators.innerHTML = '';
                                slides.forEach((s,i)=>{
                                    const btn = document.createElement('button');
                                    btn.addEventListener('click', ()=> { goTo(i); });
                                    if (i===idx) btn.classList.add('active');
                                    indicators.appendChild(btn);
                                });
                            }

                            function update(){
                                slidesWrap.style.transform = `translateX(${-idx * 100}%)`;
                                Array.from(indicators.children).forEach((b,i)=> b.classList.toggle('active', i===idx));
                            }

                            function goTo(i){ idx = i % slides.length; update(); }

                            renderIndicators(); update();
                            setInterval(()=>{ idx = (idx+1) % slides.length; update(); }, 5000);
                        })();
                    </script>

        <!-- Feature sheet + bottom nav -->
        <div id="featureBackdrop" onclick="featureBackdropClick(event)" class="hidden fixed inset-0 bg-black/40 z-40"></div>
        <div id="featureSheet" class="hidden fixed bottom-0 left-0 right-0 z-50 transform translate-y-full transition-transform duration-300">
            <div class="max-w-3xl mx-auto bg-white rounded-t-2xl shadow-lg p-4">
                <div class="flex items-center justify-between">
                    <h3 class="font-semibold">Quick Actions</h3>
                    <button onclick="closeFeatureSheet()" class="text-slate-500">Close</button>
                </div>
                <div class="grid grid-cols-4 gap-3 mt-4">
                    <a href="accounts.html" class="flex flex-col items-center p-3 bg-slate-50 rounded-lg"> <i class="fas fa-wallet text-lg text-indigo-600"></i> <span class="text-xs mt-1">Accounts</span></a>
                    <a href="trade.html" class="flex flex-col items-center p-3 bg-slate-50 rounded-lg"> <i class="fas fa-chart-line text-lg text-emerald-600"></i> <span class="text-xs mt-1">Trade</span></a>
                    <a href="transfer.html?type=international" class="flex flex-col items-center p-3 bg-slate-50 rounded-lg"> <i class="fas fa-globe text-lg text-sky-500"></i> <span class="text-xs mt-1">Intl Transfer</span></a>
                    <a href="transactions.html" class="flex flex-col items-center p-3 bg-slate-50 rounded-lg"> <i class="fas fa-history text-lg text-slate-700"></i> <span class="text-xs mt-1">History</span></a>

                    <a href="deposit.html" data-fullscreen="true" class="flex flex-col items-center p-3 bg-slate-50 rounded-lg"> <i class="fas fa-money-bill-wave text-lg text-green-600"></i> <span class="text-xs mt-1">Deposit</span></a>
                    <a href="#" class="flex flex-col items-center p-3 bg-slate-50 rounded-lg"> <i class="fas fa-hand-holding-dollar text-lg text-rose-600"></i> <span class="text-xs mt-1">Withdraw</span></a>
                    <a href="bills.html" class="flex flex-col items-center p-3 bg-slate-50 rounded-lg"> <i class="fas fa-file-invoice-dollar text-lg text-yellow-600"></i> <span class="text-xs mt-1">Bill Pay</span></a>
                    <a href="cards.html" class="flex flex-col items-center p-3 bg-slate-50 rounded-lg"> <i class="fas fa-credit-card text-lg text-indigo-500"></i> <span class="text-xs mt-1">Cards</span></a>
                </div>
                <div class="mt-4 text-xs text-slate-500">More: Scheduled payments, External transfers, Statements, Support</div>
            </div>
        </div>

        <!-- bottom nav removed to consolidate profile's bottom nav as app-wide control -->

        <!-- Feature Modals -->
        <div id="modalBackdrop" class="hidden fixed inset-0 bg-black/40 z-40"></div>

        <!-- Customer Service Modal -->
        <div id="modal-cs" class="hidden fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50">
            <div class="bg-white rounded-lg w-11/12 max-w-md p-4">
                <div class="flex items-center justify-between">
                    <h3 class="text-lg font-semibold">Customer Support</h3>
                    <button onclick="closeCustomerServiceModal()" class="text-slate-500">Close</button>
                </div>
                <div class="mt-3 text-sm text-slate-600">
                    <p>Need help? Call <strong>+1-800-ABU-HELP</strong> or send us a message.</p>
                    <p class="mt-2">Or start a chat (demo) — our agents will respond shortly.</p>
                </div>
                <div class="mt-4 flex gap-2">
                    <a href="tel:+18002284435" class="flex-1 bg-indigo-600 text-white py-2 rounded text-center">Call Support</a>
                        <span class="text-xs">Transfer</span>
                </div>
            </div>
        </div>

        <!-- Sidebar Navigation -->
        <div id="sidebarBackdrop" onclick="closeSidebar()" class="hidden fixed inset-0 bg-black/40 z-40"></div>
        <aside id="sidebarPanel" class="fixed top-0 left-0 bottom-0 w-72 bg-white shadow z-50 transform -translate-x-full transition-transform">
            <div class="p-4 h-full flex flex-col">
                <div class="flex items-center justify-between mb-4">
                    <div class="flex items-center gap-3">
                        <img src="assets/abu-logo.svg" class="w-10 h-10" alt="ABU">
                        <div>
                            <div class="font-semibold">American Bank United</div>
                            <div class="text-xs text-slate-500">ABU</div>
                        </div>
                    </div>
                    <button onclick="closeSidebar()" class="text-slate-500"><i class="fas fa-times"></i></button>
                </div>
                <nav class="flex-1">
                    <ul class="space-y-2">
                        <li><a href="dashboard.html" onclick="closeSidebar()" class="block py-2 px-3 rounded hover:bg-slate-50">Home</a></li>
                        <li><a href="accounts.html" onclick="closeSidebar()" class="block py-2 px-3 rounded hover:bg-slate-50">Accounts</a></li>
                        <li><a href="transfer.html" onclick="closeSidebar()" class="block py-2 px-3 rounded hover:bg-slate-50">Transfer</a></li>
                        <li><a href="transactions.html" onclick="closeSidebar()" class="block py-2 px-3 rounded hover:bg-slate-50">Transactions</a></li>
                        <li><a href="cards.html" onclick="closeSidebar()" class="block py-2 px-3 rounded hover:bg-slate-50">Cards</a></li>
                        <li><a href="beneficiaries.html" onclick="closeSidebar()" class="block py-2 px-3 rounded hover:bg-slate-50">Beneficiaries</a></li>
                    </ul>
                </nav>
                <div class="mt-4">
                    <button onclick="logoutFromMenu()" class="w-full bg-rose-600 text-white py-2 rounded">Logout</button>
                </div>
            </div>
        </aside>

        <!-- Bill Pay Modal -->
        <div id="modal-bill" class="hidden fixed inset-0 z-50 flex items-end sm:items-center justify-center p-4">
            <div class="bg-white rounded-t-2xl sm:rounded-xl w-full max-w-md p-4 shadow-lg">
                <div class="flex items-center justify-between">
                    <h3 class="font-semibold">Pay a Bill</h3>
                    <button onclick="closeFeatureModal('bill')" class="text-slate-500">Close</button>
                </div>
                <form id="billForm" class="mt-4 space-y-3" onsubmit="submitBill(event)">
                    <label class="text-xs text-slate-500">Biller</label>
                    <select id="billerSelect" required class="w-full rounded-md border px-3 py-2">
                        <option value="">Select biller</option>
                    </select>

                    <label class="text-xs text-slate-500">Billing Item</label>
                    <select id="billingSelect" class="w-full rounded-md border px-3 py-2">
                        <option value="">Select billing (optional)</option>
                    </select>

                    <label class="text-xs text-slate-500">Payer</label>
                    <input id="billPayerName" type="text" readonly class="w-full rounded-md border px-3 py-2 bg-slate-50" placeholder="Your name">

                    <label class="text-xs text-slate-500">From account</label>
                    <select id="fromAccountSelect" required class="w-full rounded-md border px-3 py-2">
                        <option value="">From account</option>
                    </select>

                    <label class="text-xs text-slate-500">Amount</label>
                    <input id="billAmount" type="number" step="0.01" min="0.1" required class="w-full rounded-md border px-3 py-2" placeholder="Amount">

                    <input id="billMemo" type="text" class="w-full rounded-md border px-3 py-2" placeholder="Memo (optional)">
                    <button type="submit" class="w-full bg-indigo-600 text-white py-2 rounded-md">Pay Now</button>
                </form>
            </div>
        </div>

        <!-- QR Pay Modal -->
        <div id="modal-qr" class="hidden fixed inset-0 z-50 flex items-end sm:items-center justify-center p-4">
            <div class="bg-white rounded-t-2xl sm:rounded-xl w-full max-w-md p-4 shadow-lg">
                <div class="flex items-center justify-between">
                    <h3 class="font-semibold">QR Payment</h3>
                    <button onclick="closeFeatureModal('qr')" class="text-slate-500">Close</button>
                </div>
                <form class="mt-4 space-y-3" onsubmit="submitQRPay(event)">
                    <select id="qrFromAccount" required class="w-full rounded-md border px-3 py-2">
                        <option value="">From account</option>
                    </select>
                    <input id="qrAccountNumber" type="text" required class="w-full rounded-md border px-3 py-2" placeholder="Recipient account number">
                    <input id="qrAmount" type="number" step="0.01" min="0.1" required class="w-full rounded-md border px-3 py-2" placeholder="Amount">
                    <button type="submit" class="w-full bg-indigo-600 text-white py-2 rounded-md">Pay</button>
                </form>
            </div>
        </div>

        <!-- External transfer confirmation modal -->
        <div id="modal-confirm-external" class="hidden fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50">
            <div class="bg-white rounded-lg w-11/12 max-w-md p-4">
                <div class="flex items-center justify-between">
                    <h3 class="text-lg font-semibold">Confirm External Transfer</h3>
                    <button onclick="closeConfirmExternalTransfer()" class="text-slate-500">Close</button>
                </div>
                <div class="mt-3">
                    <div class="text-sm text-slate-600">Please confirm the transfer details before sending.</div>
                    <div class="mt-4 space-y-2">
                        <div><strong>From Account:</strong> <span id="confirmFromAccount">—</span></div>
                        <div><strong>Bank:</strong> <span id="confirmBankName">—</span></div>
                        <div><strong>Account number:</strong> <span id="confirmAccountNumber">—</span></div>
                        <div><strong>IBAN / Routing:</strong> <span id="confirmIban">—</span></div>
                        <div><strong>Amount:</strong> <span id="confirmAmount">—</span></div>
                    </div>
                </div>
                <div class="mt-4 flex gap-2 justify-end">
                    <button type="button" onclick="closeConfirmExternalTransfer()" class="px-4 py-2">Cancel</button>
                    <button type="button" id="confirmExternalBtn" onclick="confirmExternalTransfer()" class="px-4 py-2 bg-indigo-600 text-white rounded">Confirm & Send</button>
                </div>
            </div>
        </div>

        <!-- Beneficiaries Modal -->
        <div id="modal-beneficiaries" class="hidden fixed inset-0 z-50 flex items-end sm:items-center justify-center p-4">
            <div class="bg-white rounded-t-2xl sm:rounded-xl w-full max-w-md p-4 shadow-lg">
                <div class="flex items-center justify-between">
                    <h3 class="font-semibold">Beneficiaries</h3>
                    <button onclick="closeFeatureModal('beneficiaries')" class="text-slate-500">Close</button>
                </div>
                <div class="mt-4">
                    <form id="beneficiaryForm" data-editing="" class="space-y-2" onsubmit="createBeneficiary(event)">
                        <input id="benName" type="text" required class="w-full rounded-md border px-3 py-2" placeholder="Full name">
                        <input id="benAccountNumber or IBAN" type="text" class="w-full rounded-md border px-3 py-2" placeholder="Account number or IBAN">
                        <input id="benBank" type="text" class="w-full rounded-md border px-3 py-2" placeholder="Bank name">
                        <input id="benEmail" type="email" class="w-full rounded-md border px-3 py-2" placeholder="Email">
                        <input id="benPhone" type="tel" class="w-full rounded-md border px-3 py-2" placeholder="Phone number">
                   
                        <div class="flex gap-2">
                            <button type="submit" class="flex-1 bg-indigo-600 text-white py-2 rounded-md">Add</button>
                            <button type="button" id="benCancelBtn" onclick="(function(){ const f=document.getElementById('beneficiaryForm'); f.reset(); f.dataset.editing=''; f.querySelector('button[type=submit]').textContent='Add'; this.style.display='none'; })()" class="flex-1 border py-2 rounded-md hidden">Cancel</button>
                            <button type="button" onclick="closeFeatureModal('beneficiaries')" class="flex-1 border py-2 rounded-md">Done</button>
                        </div>
                    </form>
                    <div id="beneficiariesList" class="mt-4 space-y-2"></div>
                </div>
            </div>
        </div>

        <!-- Airtime/Data Modal -->
        <div id="modal-airtime" class="hidden fixed inset-0 z-50 flex items-end sm:items-center justify-center p-4">
            <div class="bg-white rounded-t-2xl sm:rounded-xl w-full max-w-md p-4 shadow-lg">
                <div class="flex items-center justify-between">
                    <h3 class="font-semibold">Buy Airtime / Data</h3>
                    <button onclick="closeFeatureModal('airtime')" class="text-slate-500">Close</button>
                </div>
                <form id="airtimeForm" class="mt-4 space-y-3" onsubmit="submitAirtime(event)">
                    <input id="phoneNumber" type="tel" required class="w-full rounded-md border px-3 py-2" placeholder="Phone number">
                    <select id="airtimeProvider" class="w-full rounded-md border px-3 py-2">
                        <option value="att">AT&T</option>
                        <option value="tmobile">T-Mobile</option>
                        <option value="verizon">Verizon</option>
                    </select>
                    <select id="airtimeAmount" class="w-full rounded-md border px-3 py-2">
                        <option value="5">$5</option>
                        <option value="10">$10</option>
                        <option value="20">$20</option>
                    </select>
                    <button type="submit" class="w-full bg-indigo-600 text-white py-2 rounded-md">Buy</button>
                </form>
            </div>
        </div>

        <!-- Betting Modal (simulation) -->
        <div id="modal-bet" class="hidden fixed inset-0 z-50 flex items-end sm:items-center justify-center p-4">
            <div class="bg-white rounded-t-2xl sm:rounded-xl w-full max-w-md p-4 shadow-lg">
                <div class="flex items-center justify-between">
                    <h3 class="font-semibold">Place a Bet (Demo)</h3>
                    <button onclick="closeFeatureModal('bet')" class="text-slate-500">Close</button>
                </div>
                <form id="betForm" class="mt-4 space-y-3" onsubmit="submitBet(event)">
                    <input id="betAmount" type="number" step="0.01" min="1" required class="w-full rounded-md border px-3 py-2" placeholder="Amount to wager">
                    <select id="betType" class="w-full rounded-md border px-3 py-2">
                        <option value="win">Win/Lose</option>
                        <option value="score">Score Predictor</option>
                    </select>
                    <button type="submit" class="w-full bg-rose-600 text-white py-2 rounded-md">Place Bet</button>
                </form>
            </div>
        </div>
        <!-- Loan Modal -->
        <div id="modal-loan" class="hidden fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50">
            <div class="bg-white rounded-lg w-11/12 max-w-md p-4">
                <div class="flex items-center justify-between">
                    <h3 class="text-lg font-semibold">Apply for Loan</h3>
                    <button onclick="closeFeatureModal('loan')" class="text-slate-500">Close</button>
                </div>
                <form id="loanForm" class="mt-3 space-y-3" onsubmit="submitLoan(event)">
                    <input id="loanAmount" type="number" step="0.01" min="1" required class="w-full rounded-md border px-3 py-2" placeholder="Loan amount">
                    <select id="loanTerm" required class="w-full rounded-md border px-3 py-2">
                        <option value="">Select term</option>
                        <option value="6">6 months</option>
                        <option value="12">12 months</option>
                        <option value="24">24 months</option>
                    </select>
                    <input id="loanPurpose" type="text" class="w-full rounded-md border px-3 py-2" placeholder="Purpose (optional)">
                    <button type="submit" class="w-full bg-indigo-600 text-white py-2 rounded-md">Apply</button>
                </form>
            </div>
        </div>
        <script src="js/bottom-nav.js?v=20260121.1"></script>
    </body>
    </html>

