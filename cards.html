<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script>
        if (!localStorage.getItem('authToken')) {
            window.location.href = 'index.html';
        }
    </script>
    <title>Cards - Opay</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/dashboard.css">
        <link rel="stylesheet" href="css/opay.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <!-- New ABU Header (standalone for Cards page) -->
    <header class="opay-header" style="position:relative;">
        <div class="max-w-2xl mx-auto px-4 py-3 flex items-center justify-between">
            <div class="flex items-center gap-3">
                <div class="opay-logo"><i class="fas fa-university"></i></div>
                <div>
                    <div class="opay-sub">American Bank United</div>
                    <h1 class="opay-title">Cards</h1>
                </div>
            </div>
            <div>
                <span id="userName" class="opay-sub"><i class="fas fa-user-circle"></i> Loading...</span>
                <button id="cardsLogout" class="opay-btn" style="margin-left:12px;">Logout</button>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <div class="container main-content">
        <div class="dashboard-header">
            <div>
                <h1><i class="fas fa-credit-card"></i> My Cards</h1>
                <p class="subtitle">Manage your debit and credit cards</p>
            </div>
            <div class="dashboard-actions">
                <button onclick="showRequestCardModal()" class="btn btn-primary">
                    <i class="fas fa-plus"></i> Request New Card
                </button>
                <button onclick="generateVirtualCardForUser()" class="btn btn-secondary ml-2">
                    <i class="fas fa-magic"></i> Generate Virtual Card
                </button>
            </div>
        </div>

        <div id="alert" class="alert" style="display: none;"></div>

        <!-- Virtual Cards Section -->
        <div class="cards-showcase">
            <div id="cardsList" class="cards-grid">
                <!-- Cards will be loaded here -->
            </div>
        </div>

        <!-- Card Features -->
        <div class="section">
            <h2><i class="fas fa-star"></i> Card Features</h2>
            <div class="features-grid">
                <div class="feature-card">
                    <div class="feature-icon"><i class="fas fa-shield-alt"></i></div>
                    <h3>Secure Transactions</h3>
                    <p>Advanced fraud protection and real-time alerts</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon"><i class="fas fa-mobile-alt"></i></div>
                    <h3>Contactless Payment</h3>
                    <p>Tap to pay with NFC technology</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon"><i class="fas fa-gift"></i></div>
                    <h3>Cashback Rewards</h3>
                    <p>Earn up to 3% cashback on purchases</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon"><i class="fas fa-globe"></i></div>
                    <h3>Global Acceptance</h3>
                    <p>Use anywhere Visa/Mastercard is accepted</p>
                </div>
            </div>
        </div>

        <!-- Recent Card Transactions -->
        <div class="section">
            <div class="section-header">
                <h2><i class="fas fa-history"></i> Recent Card Transactions</h2>
            </div>
            <div id="cardTransactions" class="transactions-container">
                <!-- Card transactions will be loaded here -->
            </div>
        </div>
    </div>

    <!-- Request Card Modal -->
    <div id="requestCardModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2><i class="fas fa-credit-card"></i> Request New Card</h2>
                <span class="close" onclick="closeRequestCardModal()">&times;</span>
            </div>
            <form id="requestCardForm">
                <div class="form-group">
                    <label for="cardType"><i class="fas fa-tag"></i> Card Type</label>
                    <select id="cardType" name="cardType" required>
                        <option value="">Select card type</option>
                        <option value="debit">Debit Card</option>
                        <option value="credit">Credit Card</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="linkedAccount"><i class="fas fa-link"></i> Link to Account</label>
                    <select id="linkedAccount" name="linkedAccount" required>
                        <option value="">Select account</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="cardDesign"><i class="fas fa-palette"></i> Card Design</label>
                    <select id="cardDesign" name="cardDesign" required>
                        <option value="classic">Classic Blue</option>
                        <option value="platinum">Platinum Silver</option>
                        <option value="gold">Gold Premium</option>
                        <option value="black">Black Elite</option>
                    </select>
                </div>

                <button type="submit" class="btn btn-primary btn-block">
                    <i class="fas fa-paper-plane"></i> Submit Request
                </button>
            </form>
        </div>
    </div>

    <script src="js/utils.js"></script>
    <script src="js/api.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/cards.js"></script>
    <script src="js/cards-api.js"></script>
    <script src="js/bottom-nav.js"></script>
</body>
</html>